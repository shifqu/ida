services:
  ida:
    build:
      context: .
      target: production
    restart: unless-stopped
    volumes:
      - db_data:/db_data:rw
      - static_data:/static_data
      - media_data:/media_data
    env_file:
      - .dockerenv
    environment:
      - DJANGO_ENVIRONMENT=production
      - DJANGO_STATIC_ROOT=/static_data
      - DJANGO_MEDIA_ROOT=/media_data
      - DJANGO_DATABASE_NAME=/db_data/db.sqlite3
      - DJANGO_DEBUG=0
    ports:
      - "8000:38080"

volumes:
  db_data:
  static_data:
  media_data: